/*
 * jQuery UI Menubar 1.9m5
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Menubar
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.position.js
 *	jquery.ui.menu.js
 */
(function(d){d.widget("ui.menubar",{options:{buttons:false,menuIcon:false},_create:function(){var a=this,c=this.items=this.element.children("li").addClass("ui-menubar-item").attr("role","presentation").children("button, a");c.slice(1).attr("tabIndex",-1);this.element.addClass("ui-menubar ui-widget-header ui-helper-clearfix").attr("role","menubar");this._focusable(c);this._hoverable(c);c.next("ul").menu({select:function(b,f){f.item.parents("ul.ui-menu:last").hide();a._trigger("select",b,f);a._close();
d(b.target).prev().focus()}}).hide().attr("aria-hidden","true").attr("aria-expanded","false").bind("keydown.menubar",function(b){if(!d(this).is(":hidden"))switch(b.keyCode){case d.ui.keyCode.LEFT:a._left(b);b.preventDefault();break;case d.ui.keyCode.RIGHT:a._right(b);b.preventDefault()}});c.each(function(){var b=d(this),f=b.next("ul");b.bind("click.menubar focus.menubar mouseenter.menubar",function(e){if(!(e.type=="focus"&&!e.originalEvent)){e.preventDefault();if(e.type=="click"&&f.is(":visible")&&
a.active&&a.active[0]==f[0])a._close();else if(a.open&&e.type=="mouseenter"||e.type=="click")a._open(e,f)}}).bind("keydown",function(e){switch(e.keyCode){case d.ui.keyCode.SPACE:case d.ui.keyCode.UP:case d.ui.keyCode.DOWN:a._open(e,d(this).next());e.preventDefault();break;case d.ui.keyCode.LEFT:a._prev(e,d(this));e.preventDefault();break;case d.ui.keyCode.RIGHT:a._next(e,d(this));e.preventDefault()}}).addClass("ui-button ui-widget ui-button-text-only ui-menubar-link").attr("role","menuitem").attr("aria-haspopup",
"true").wrapInner("<span class='ui-button-text'></span>");if(a.options.menuIcon){b.addClass("ui-state-default").append("<span class='ui-button-icon-secondary ui-icon ui-icon-triangle-1-s'></span>");b.removeClass("ui-button-text-only").addClass("ui-button-text-icon-secondary")}a.options.buttons||b.addClass("ui-menubar-link").removeClass("ui-state-default")});a._bind({keydown:function(b){if(b.keyCode==d.ui.keyCode.ESCAPE&&a.active&&a.active.menu("left",b)!==true){var f=a.active;a.active.blur();a._close(b);
f.prev().focus()}},focusin:function(){clearTimeout(a.closeTimer)},focusout:function(b){a.closeTimer=setTimeout(function(){a._close(b)},100)}})},_destroy:function(){var a=this.element.children("li").removeClass("ui-menubar-item").removeAttr("role","presentation").children("button, a");this.element.removeClass("ui-menubar ui-widget-header ui-helper-clearfix").removeAttr("role","menubar").unbind(".menubar");a.unbind(".menubar").removeClass("ui-button ui-widget ui-button-text-only ui-menubar-link ui-state-default").removeAttr("role",
"menuitem").removeAttr("aria-haspopup","true").children("span.ui-button-text").each(function(){var c=d(this);c.parent().html(c.html())}).end().children(".ui-icon").remove();this.element.find(":ui-menu").menu("destroy").show().removeAttr("aria-hidden","true").removeAttr("aria-expanded","false").removeAttr("tabindex").unbind(".menubar")},_close:function(){if(this.active&&this.active.length){this.active.menu("closeAll").hide().attr("aria-hidden","true").attr("aria-expanded","false");this.active.prev().removeClass("ui-state-active").removeAttr("tabIndex");
this.active=null;this.open=false}},_open:function(a,c){if(!(this.active&&this.active[0]==c[0])){if(this.active){this.active.menu("closeAll").hide().attr("aria-hidden","true").attr("aria-expanded","false");this.active.prev().removeClass("ui-state-active")}var b=c.prev().addClass("ui-state-active").attr("tabIndex",-1);this.active=c.show().position({my:"left top",at:"left bottom",of:b}).removeAttr("aria-hidden").attr("aria-expanded","true").menu("focus",a,c.children("li").first()).focus().focusin();
this.open=true}},_prev:function(a,c){c.attr("tabIndex",-1);var b=c.parent().prevAll("li").children(".ui-button").eq(0);b.length?b.removeAttr("tabIndex")[0].focus():this.element.children("li:last").children(".ui-button:last").removeAttr("tabIndex")[0].focus()},_next:function(a,c){c.attr("tabIndex",-1);var b=c.parent().nextAll("li").children(".ui-button").eq(0);b.length?b.removeAttr("tabIndex")[0].focus():this.element.children("li:first").children(".ui-button:first").removeAttr("tabIndex")[0].focus()},
_left:function(a){var c=this.active.parent().prevAll("li:eq(0)").children(".ui-menu").eq(0);c.length||(c=this.element.children("li:last").children(".ui-menu:first"));this._open(a,c)},_right:function(a){var c=this.active.parent().nextAll("li:eq(0)").children(".ui-menu").eq(0);c.length||(c=this.element.children("li:first").children(".ui-menu:first"));this._open(a,c)}})})(jQuery);
